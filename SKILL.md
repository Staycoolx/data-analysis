---
name: data-analysis
description: |
  æ•°æ®åˆ†ææŠ€èƒ½ï¼Œæ¶µç›–æ¢ç´¢æ€§æ•°æ®åˆ†æ(EDA)å’ŒéªŒè¯æ€§æ•°æ®åˆ†æ(CDA)å…¨æµç¨‹ã€‚
  è§¦å‘æ¡ä»¶ï¼š
  - ç”¨æˆ·éœ€è¦åˆ†ææ•°æ®ã€æ¢ç´¢æ•°æ®åˆ†å¸ƒã€å‘ç°æ¨¡å¼æˆ–å¼‚å¸¸å€¼
  - ç”¨æˆ·éœ€è¦æ•°æ®å¯è§†åŒ–ï¼ˆç›´æ–¹å›¾ã€ç®±çº¿å›¾ã€æ•£ç‚¹å›¾ã€çƒ­åŠ›å›¾ç­‰ï¼‰
  - ç”¨æˆ·éœ€è¦ç»Ÿè®¡å»ºæ¨¡ã€æœºå™¨å­¦ä¹ æ¨¡å‹æˆ–é¢„æµ‹åˆ†æ
  - ç”¨æˆ·éœ€è¦å› æœæ¨æ–­ï¼ˆPSMåŒ¹é…ã€DIDåŒé‡å·®åˆ†ã€RDDæ–­ç‚¹å›å½’ç­‰ï¼‰
  - ç”¨æˆ·éœ€è¦å‡è®¾æ£€éªŒæˆ–ABå®éªŒåˆ†æ
  - ç”¨æˆ·æåˆ°æ•°æ®æ¸…æ´—ã€è¡ç”Ÿå˜é‡è®¡ç®—ã€æè¿°æ€§ç»Ÿè®¡
  - ç”¨æˆ·éœ€è¦åˆ¶ä½œæ•°æ®åˆ†ææŠ¥å‘Š
---

# æ•°æ®åˆ†ææŠ€èƒ½ (é€šç”¨ç‰ˆ)

## ğŸ’¡ åˆ†ææ€è·¯ï¼šå…ˆæ€è€ƒï¼Œå†æ‰§è¡Œ

æ‹¿åˆ°æ•°æ®åï¼Œè¯·æŒ‰ç…§**"D-D-S-P"æ¡†æ¶**æ„å»ºåˆ†ææ€è·¯ï¼š

1.  **Describe (çœ‹å…¨è²Œ)**ï¼šæ•°æ®é•¿ä»€ä¹ˆæ ·ï¼Ÿ -> `auto_eda.py`
2.  **Diagnose (æ‰¾åŸå› )**ï¼šä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ -> `analyze_drivers_optimized.py`
3.  **Segment (åšç»†åˆ†)**ï¼šä¸åŒç¾¤ä½“æœ‰ä½•å·®å¼‚ï¼Ÿ -> `analyze_groups.py`
4.  **Predict (æµ‹æœªæ¥)**ï¼šæœªæ¥ä¼šæ€æ ·ï¼Ÿ -> `predict_target.py`

---

## ä¸€ã€å·¥å…·ç®±ä½¿ç”¨æŒ‡å—

### 1. å…¨å±€ä½“æ£€ (EDA) - Describe

**å·¥å…·**ï¼š`scripts/auto_eda.py`

```bash
python3 scripts/auto_eda.py data.csv --output report_dir --target target_col
```

### 2. å½’å› åˆ†æ (Driver Analysis) - Diagnose

**å·¥å…·**ï¼š`scripts/analyze_drivers_optimized.py`

```bash
# è‡ªåŠ¨å½’å› ï¼šä»€ä¹ˆå½±å“äº†ç›®æ ‡å˜é‡ï¼Ÿ
python3 scripts/analyze_drivers_optimized.py data.csv target_col --output driver_report
```

### 3. åˆ†ç»„æ´å¯Ÿ (Group Analysis) - Segment

**å·¥å…·**ï¼š`scripts/analyze_groups.py`

```bash
# è‡ªåŠ¨åˆ†ç»„ï¼šå“ªç±»ç¾¤ä½“è¡¨ç°æ›´å¥½ï¼Ÿ
python3 scripts/analyze_groups.py data.csv group_col target_col --agg mean sum count
```

### 4. é¢„æµ‹å»ºæ¨¡ (Prediction) - Predict

**å·¥å…·**ï¼š`scripts/predict_target.py`

**åœºæ™¯**ï¼š
- "é¢„æµ‹ä¸‹ä¸ªæœˆçš„é”€é‡"
- "é¢„æµ‹å“ªäº›ç”¨æˆ·å³å°†æµå¤±"

```bash
# è‡ªåŠ¨å»ºæ¨¡å¹¶è¾“å‡ºé¢„æµ‹ç»“æœ
python3 scripts/predict_target.py data.csv target_col --output prediction_result
```
*äº§å‡ºï¼šæ¨¡å‹è¯„ä¼°æŠ¥å‘Šã€å«é¢„æµ‹å€¼çš„CSVæ–‡ä»¶ã€å¯å¤ç”¨çš„æ¨¡å‹æ–‡ä»¶(.joblib)ã€‚*

---

## äºŒã€æ·±åº¦éªŒè¯ (Verification)

### 2.1 æ¨¡å‹é€‰æ‹©ä¸ä¸å¹³è¡¡å¤„ç†

**âš ï¸ å…³é”®æ£€æŸ¥**ï¼šç›®æ ‡å˜é‡æ˜¯å¦å­˜åœ¨ä¸¥é‡ä¸å¹³è¡¡ï¼ˆå¦‚æ¬ºè¯ˆ<1%ï¼‰ï¼Ÿ

å¦‚æœæ˜¯ï¼Œ**ä¸¥ç¦**ä½¿ç”¨ Accuracy ä½œä¸ºè¯„ä¼°æŒ‡æ ‡ï¼Œ**ä¸¥ç¦**ç›´æ¥ä½¿ç”¨é»˜è®¤å‚æ•°å»ºæ¨¡ã€‚

| ç­–ç•¥ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| **è¯„ä¼°æŒ‡æ ‡** | **PR-AUC**, F1-Score, Recall | å…³æ³¨å°‘æ•°ç±»æŸ¥å…¨ç‡ |
| **æ•°æ®å±‚é¢** | SMOTEè¿‡é‡‡æ ·, Tomek Linksæ¬ é‡‡æ · | å¹³è¡¡è®­ç»ƒé›†åˆ†å¸ƒ |
| **æ¨¡å‹å±‚é¢** | `scale_pos_weight` (XGB), `class_weight` (sklearn) | å¢åŠ å°‘æ•°ç±»æƒ©ç½šæƒé‡ |

### 2.2 å› æœæ¨æ–­æ–¹æ³•

è¯¦è§ [references/causal-inference.md](references/causal-inference.md)

---

## ä¸‰ã€æŠ¥å‘Šè¾“å‡ºæ ¼å¼

```markdown
# [åˆ†ææ ‡é¢˜]

## ä¸€å¥è¯ç»“è®º
[æ ¸å¿ƒå‘ç°ï¼Œç›´æ¥å›ç­”ä¸šåŠ¡é—®é¢˜]

## å…³é”®å‘ç°
- **[ä¸šåŠ¡ç°è±¡]**ï¼šæ•°æ®è¡¨ç°ä¸º... (å›¾è¡¨X)ï¼Œè¯´æ˜... (ä¸šåŠ¡å«ä¹‰)

## åˆ†æè¿‡ç¨‹
1. **å…¨è²Œ**ï¼šæ•°æ®æ•´ä½“æƒ…å†µ...
2. **å½’å› **ï¼šæ ¸å¿ƒé©±åŠ¨å› ç´ æ˜¯...
3. **ç»†åˆ†**ï¼šåœ¨XXç¾¤ä½“ä¸­è¡¨ç°å°¤ä¸ºçªå‡º...
4. **é¢„æµ‹**ï¼šæ¨¡å‹å‡†ç¡®ç‡è¾¾XX%ï¼Œé¢„è®¡æœªæ¥...

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨ (Todo)
1. å…·ä½“å¯æ‰§è¡Œçš„å»ºè®®
```

## å››ã€æ³¨æ„äº‹é¡¹

- **ç¯å¢ƒä¾èµ–**ï¼šä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“ `sklearn`ï¼Œ`xgboost` ç­‰ä½œä¸ºé«˜çº§é€‰é¡¹ã€‚
- **å› æœå±€é™**ï¼šå¦‚æœç‰¹å¾æ˜¯è„±æ•çš„(å¦‚PCAç‰¹å¾)æˆ–ç‰©ç†æ„ä¹‰ä¸æ˜ï¼Œæ…ç”¨å› æœå›¾ï¼Œä¾§é‡äºç›¸å…³æ€§å’Œç‰¹å¾é‡è¦æ€§ã€‚
- **å¼‚å¸¸å€¼**ï¼šå…ˆå¯è§†åŒ–è¯†åˆ«ï¼Œå†å†³å®šå¤„ç†æ–¹å¼ã€‚
- **ä¸­æ–‡æ˜¾ç¤º**ï¼šè®¾ç½® `plt.rcParams['font.sans-serif']`ã€‚
